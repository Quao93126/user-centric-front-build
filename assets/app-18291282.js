import{r as l,j as e,T as r,P as u,B as g,M as D,a as E,S as N,b as F,W as ce}from"./index-8838b155.js";import{_ as ae,d as de,I as xe}from"./mapdata-aed0f485.js";import{S as O,C as z}from"./searchbar-d72c6e34.js";import{C as he}from"./Container-cc256d13.js";import{G as n}from"./Grid-6ae7cbef.js";import{I as A,a as T}from"./ImageListItem-eadb5ff6.js";import{C as _}from"./Checkbox-3e43aad3.js";import"./OutlinedInput-b72ed762.js";import"./react-is.production.min-a192e302.js";import"./isMuiElement-d45f43a8.js";const W="https://user-centric-travel-backend.onrender.com/users/",L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:520,bgcolor:"background.paper",border:"2px solid #000",boxShadow:24,p:4};function ue(){const[R,x]=l.useState(0),[c,v]=l.useState([]),M=()=>F.get(`${W}getallCountry`);l.useEffect(()=>{M().then(t=>{v(t.data.data)}).catch(()=>{console.log("failed")})},[]);const[P,j]=l.useState(!1),[f,$]=l.useState(""),[U,G]=l.useState([c]),[a,m]=l.useState([]),y=Object.values(a).filter(Boolean).length,H=()=>j(!0),V=()=>j(!1),X=t=>{$(t.target.value)},q=t=>{const i=c.find(s=>s.title===t),o=i?i.score:0;a[t]?x(s=>s-Number(o)):x(s=>s+Number(o)),m(s=>{const d={...s};return d[t]=!s[t],d})};l.useEffect(()=>{G(c.filter(t=>t.title.toLowerCase().includes(f.toLowerCase())))},[f,c]);const[h,J]=l.useState([]),K=()=>F.get(`${W}getallCity`);l.useEffect(()=>{K().then(t=>{J(t.data.data)}).catch(()=>{console.log("failed")})},[]);const[Q,b]=l.useState(!1),[p,Y]=l.useState(""),[Z,ee]=l.useState(h),[C,te]=l.useState([]),S=Object.values(C).filter(Boolean).length,k=()=>b(!0),se=()=>b(!1),ie=t=>{Y(t.target.value)},oe=t=>{let i="Not";Object.keys(z).forEach(o=>{z[o].cities.includes(t)&&(i=o)}),Object.keys(a).includes(i)?console.log("Country of the city has been checked already"):m(o=>{const s={...o};return s[i]=!o[i],s})},le=t=>{const i=h.find(s=>s.cityname===t),o=i?i.score:0;console.log("Score of",t,"is",o),oe(t),C[t]?x(s=>s-Number(o)):x(s=>s+Number(o)),te(s=>{const d={...s};return d[t]=!s[t],d})};l.useEffect(()=>{ee(h.filter(t=>t.cityname.toLowerCase().includes(p.toLowerCase())))},[p,h]);const I=["#5eb3d8","#fedb76","#40d3b7","#f97b7f","#f496f0","#ec7e7f"],w=Object.values(c).map(t=>t.title);let B=0;const ne=({countryName:t})=>{const i=!!a[t];let o="#93BED4";return i?(o=I[B%I.length],B+=1):w.includes(t)&&(o="#d9d9f2"),{fill:o,stroke:"black",strokeWidth:1,strokeOpacity:.2,cursor:"pointer"}},re=t=>{w.includes(t.countryName)&&m(i=>{const o={...i};return o[t.countryName]=!i[t.countryName],o})};return e.jsxs(he,{maxWidth:"xl",children:[e.jsx(n,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",marginTop:6,children:e.jsxs(n,{item:!0,style:{position:"relative"},children:[e.jsx("img",{alt:"icon",src:"/assets/images/travelscore.png",style:{width:"233px",height:"200px"}}),e.jsxs(n,{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-34%, -34%)",textAlign:"center"},children:[e.jsx(r,{style:{fontSize:"15px",color:"#474A5D",fontWeight:400},children:"Travel Score"}),e.jsx(r,{style:{fontSize:"43px",color:"#FA479D",fontWeight:600},children:R})]})]})}),e.jsxs(n,{container:!0,spacing:3,marginTop:2,sx:{display:"flex",justifyContent:"right"},children:[e.jsx(n,{item:!0,xs:6,md:6,lg:6,children:e.jsx(u,{sx:{backgroundColor:"#FB8D334D"},children:e.jsx(g,{fullWidth:!0,sx:{alignItems:"left",justifyContent:"left"},startIcon:e.jsx("img",{src:"/assets/icons/glass/ic_glass_country.png",alt:"icon",style:{marginRight:8,width:46,height:46}}),onClick:H,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(r,{sx:{color:"#E98A1B",fontSize:"18px"},children:y}),e.jsx(r,{sx:{color:"#474A5D",fontSize:"14px"},children:"Countries"})]})})})}),e.jsx(n,{item:!0,xs:6,md:6,lg:6,children:e.jsx(u,{sx:{backgroundColor:"#0071CE4D"},children:e.jsx(g,{fullWidth:!0,sx:{alignItems:"left",justifyContent:"left"},startIcon:e.jsx("img",{src:"/assets/icons/glass/ic_glass_city.png",alt:"icon",style:{marginRight:8,width:46,height:46}}),onClick:k,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(r,{sx:{color:"#0B70EC",fontSize:"18px"},children:S}),e.jsx(r,{sx:{color:"#474A5D",fontSize:"14px"},children:"Cities"})]})})})})]}),e.jsx(D,{open:P,onClose:V,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(E,{sx:L,children:[e.jsx(n,{item:!0,id:"modal-modal-title",xs:12,md:12,lg:12,children:e.jsx(u,{sx:{backgroundColor:"#FB8D334D"},children:e.jsx(g,{fullWidth:!0,sx:{alignItems:"left",justifyContent:"left"},startIcon:e.jsx("img",{src:"/assets/icons/glass/ic_glass_country.png",alt:"icon",style:{marginRight:8,width:46,height:46}}),children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(r,{sx:{color:"#E98A1B",fontSize:"18px"},children:y}),e.jsx(r,{sx:{color:"#474A5D",fontSize:"14px"},children:"Countries"})]})})})}),e.jsx(O,{filterName:f,onFilterName:X}),e.jsx(N,{children:e.jsx(A,{sx:{width:450,height:300},cols:4,rowHeight:82,children:U.map((t,i)=>e.jsxs(T,{sx:{marginTop:2},children:[e.jsx("img",{alt:`${t.value}`,src:`https://purecatamphetamine.github.io/country-flag-icons/3x2/${t.value}.svg`,style:{width:"100%",height:"auto",cursor:"pointer"}}),e.jsxs(r,{sx:{fontSize:10,color:"black"},children:[e.jsx(_,{checked:!!a[t.title],onChange:()=>q(t.title),sx:{padding:0},size:"small"}),t.title]})]},i))})})]})}),e.jsx(n,{container:!0,spacing:3,justifyContent:"center",alignItems:"center",marginTop:6,children:e.jsx(ae,{richInteraction:!0,backgroundColor:"white",borderColor:"white",color:"#93BED4",tooltipBgColor:"#31323f",size:"xl",data:de,styleFunction:ne,onClickFunction:re})}),e.jsx(D,{open:Q,onClose:se,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:e.jsxs(E,{sx:L,children:[e.jsx(n,{item:!0,id:"modal-modal-title",xs:12,md:12,lg:12,children:e.jsx(u,{sx:{backgroundColor:"#0071CE4D"},children:e.jsx(g,{fullWidth:!0,sx:{alignItems:"left",justifyContent:"left"},startIcon:e.jsx("img",{src:"/assets/icons/glass/ic_glass_city.png",alt:"icon",style:{marginRight:8,width:46,height:46}}),onClick:k,children:e.jsxs(n,{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[e.jsx(r,{sx:{color:"#0B70EC",fontSize:"18px"},children:S}),e.jsx(r,{sx:{color:"#474A5D",fontSize:"14px"},children:"Cities"})]})})})}),e.jsx(O,{filterName:p,onFilterName:ie}),e.jsx(N,{children:e.jsx(A,{sx:{width:450,height:300,backgroundColor:"black",paddingX:2},cols:2,gap:20,rowHeight:82,children:Z.map((t,i)=>e.jsxs(T,{sx:{marginTop:2},children:[e.jsx("img",{src:"/assets/images/city.jpg",alt:"Background",style:{width:"90%",height:"100%",cursor:"pointer"}}),e.jsx(xe,{title:e.jsxs(r,{sx:{fontSize:10,color:"white"},children:[e.jsx(_,{checked:!!C[t.cityname],onChange:()=>le(t.cityname),sx:{padding:0},size:"small"}),t.cityname]}),position:"below"})]},i))})})]})})]})}function Ie(){return e.jsxs(e.Fragment,{children:[e.jsx(ce,{children:e.jsx("title",{children:" Dashboard | Travel Bio"})}),e.jsx(ue,{})]})}export{Ie as default};
